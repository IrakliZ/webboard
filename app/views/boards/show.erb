<% provide(:title, @board.title) %>

<body>
<%= javascript_include_tag 'paperjs/paper-full.min.js' %>

<h3 class="center"><%= @board.title %></h3>
<!--<form name="color" action="" method="GET">-->
  <!--Color: <input type="text" name="colorInput">-->
  <!--<input type="button" name="colorButton" value="Change Color" onclick="changeColor(this.form)" class="btn btn-large btn-primary">-->
<!--</form>-->
<div class="row">
  <div class="canvas-heading">
    <canvas id="canvas-toolbar" resize></canvas>
  </div>
</div>
<div class="row">
  <div class="canvas-panel" style="overflow: auto;">
    <div class="canvas-body">
      <canvas id="board-canvas" width="1200" height="700"></canvas>
    </div>
  </div>
</div>

<input type="button" id="save-board" value="Save" class="btn btn-primary">

<script>
    function load() {
        project.importJSON(jQuery.parseJSON(("<%=j @content %>").replace(/&quot;/g, '"')));
    };

    function save() {
        var hash = project.exportJSON();
        var path = "<%=j user_board_url %>";;
        $.ajax({
            type: "PUT",
            url: path,
            data: {board: JSON.stringify(hash)},
            dataType: 'json',
            success: function() {  },
            error: function(status, error) {
                $("#debug").append($(status.responseText));
            }
        });
    };

    $("#save-board").click(function() {
        save();
    });
</script>

<div id="debug">

</div>
<%= javascript_include_tag 'board.js' %>
</body>